/*
  assets/css/rtl.css

  Purpose: enable right-to-left layout for Arabic text while preserving
  code blocks and inline code as left-to-right. Do NOT use
  `unicode-bidi: plaintext` (it breaks lists and spacing in Chirpy).

  Usage (recommended): include this file conditionally when your page
  or site is Arabic. Example (in a layout or include):

    {% if page.lang == 'ar' or site.lang == 'ar' %}
      <link rel="stylesheet" href="{{ '/assets/css/rtl.css' | relative_url }}">
    {% endif %}

  Also ensure your HTML tag or root has `dir="rtl"` when serving Arabic
  pages, e.g. <html lang="ar" dir="rtl">. If you prefer to toggle via a
  class, add `class="rtl"` to the <body> element and it will be picked up.

  Important notes:
  - Keep code blocks LTR so asm/C/bash snippets don't get reversed.
  - Do not change image paths here; ensure images referenced in `_config.yml`
    exist (missing assets will make htmlproofer fail on build).
*/

/* Root selectors: support three ways sites may indicate RTL
   - html[lang="ar"] or html[dir="rtl"]
   - body.rtl (class-based)
*/
html[lang="ar"], html[dir="rtl"], body.rtl {
  direction: rtl; /* logical direction only */
}

/* Use logical text alignment so inline English keeps natural placement. */
html[lang="ar"], html[dir="rtl"], body.rtl {
  text-align: start; /* 'start' is right in RTL */
}

/* Keep layout containers inheriting direction (avoid forcing text-align on every block) */
main, header, footer, .container, .site, .post, article {
  direction: inherit;
}

/* Mirror floats and utility classes used by many themes */
/* These rules help place floated images/icons on the correct side in RTL. */
img[align="left"], .float-left {
  float: right !important;
}
img[align="right"], .float-right {
  float: left !important;
}

/* Mirror common margin/padding logicals where appropriate */
.pull-left, .align-left { margin-inline-start: 0; margin-inline-end: 0; }

/* Lists: keep list markers and spacing stable using logical properties */
ul, ol {
  direction: rtl; /* ensure bullet ordering is correct for RTL */
  list-style-position: outside;
  padding-inline-start: 1.25rem; /* logical start (right side in RTL) */
}

/* Tables: many tables are LTR for readability (numbers, code, columns) */
/* Set table contents LTR but keep table flow in RTL pages */
table, thead, tbody, tr, td, th {
  direction: ltr;
}

/* KEEP CODE BLOCKS AND INLINE CODE LTR
   - We avoid `unicode-bidi: plaintext` because it breaks layout in Chirpy.
   - Use `unicode-bidi: isolate` (safe) + `direction: ltr` to keep code content
     displayed in normal left-to-right order.
*/
pre, code, kbd, samp, .highlight, .language-bash, .language-c, .language-asm, .rouge-code {
  direction: ltr !important;
  unicode-bidi: isolate; /* safe isolation for mixed direction content */
  text-align: left !important;
  /* preserve whitespace/format in blocks */
}

/* Inline code inside paragraphs/lists should also stay LTR */
p code, li code, a code, span.code {
  direction: ltr;
  unicode-bidi: isolate;
}

/* Force URL-like items (emails, urls, commit hashes) to be LTR where desired */
.ltr-force, a.url, .commit-hash {
  direction: ltr;
  unicode-bidi: isolate;
}

/* Breadcrumbs/navigation: let them inherit RTL but avoid forced center alignment */
.breadcrumb, .nav, .toc {
  direction: rtl;
}

/* Small helper: if you need to mark a single element as LTR in templates, add class="ltr-force" */

/* End of rtl.css */
